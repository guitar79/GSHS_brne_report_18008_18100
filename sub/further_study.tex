\section{추후 연구}

\subsection{카메라(또는 CCD) 제어 Software 개발}

사진 관측을 이용해서 얻은 사진을 컴퓨터로 연결하여 분석이 가능할 수 있도록 만든 카메라(CCD) 제어 시스템을 개발한다. 이렇게 분석한 사진을 컴퓨터로 보낼 수 있어야 한다. 구체적으로 제어 시스템과 관련된 이야기를 하면, 카메라가 별의 크기와 관련된 정보를 분석해야 하는데, 이에는 두 가지 방법이 있다. 첫 번째 방법은 밝기의 기울기 값으로 초점이 맞음을 판단하는 것이다. 즉 수치화된 밝기를 이용하는 것이다. 각 픽셀에는 밝기에 대한 수치적인 정보가 존재한다. 인접한 픽셀의 수치 차이가 크다면 밝기 차이가 큰 것으로, 밝기 기울기가 큰 것이다. 이를 이용한다면 밝기 기울기가 가장 큰 순간이 초점이 맞았을 때로 판단하여 초점을 맞출 수 있을 것이다. 두 번째 방법은 천체의 크기로 초점이 맞음을 판단하는 것이다. 일정 밝기 이상의 픽셀에 대한 분포를 계산하는데, 각각 사진 중 가장 적은 픽셀이 조건을 만족하는 사진을 찾으면 그 사진을 초점이 맞았다고 판단할 수 있을 것이다. 이렇게 초점이 맞았음을 판단하는 것 외에도 카메라에 나오는 화면의 변화를 보아야 하므로 연속적인 변화를 실시간으로 보낼 수 있는 프로그램을 만들어서 컴퓨터가 제대로 인식을 하여 모터에 올바른 명령을 내릴 수 있는지 확인하면 가능하다.

\subsection{자동 초점 조절 알고리즘 구현}

천체망원경의 초점을 맞추기 위해 사진 관측의 사진을 연속적으로 찍어서 컴퓨터로 보내주고, 컴퓨터는 이를 분석하여 초점 조절 장치 컨트롤러에 별의 크기가 커지고 있는지 작아지고 있는지 정보를 알고리즘에 보내준다. 그러면 프로그래밍 된 Arduino가 모터를 어느 방향으로 돌려야 하는지 판단하여 모터를 돌리고, 이 과정을 반복하여 별의 초점이 맞을 때 이 과정을 멈춘다. 이러한 과정이 일어나는지 실제로 천체망원경으로 직접 확인하면 가능하다.

\subsection{추가 가능한 여러 가지 기능}

\subsubsection{STM32L432KC}

STM32L432KC는 ARDUINO NANO보다 성능이 좋은 Arduino로, 방향만 반대일 뿐 핀의 순서와 종류가 모두 같아 ARDUINO NANO에 넣었던 펌웨어를 그대로 사용할 수 있다.

\subsubsection{열선 설치}

날씨가 추운 날에는 모터가 얼어서 돌아가지 않거나 렌즈에 서리가 껴서 초점이 맞아도 맞지 않은 것으로 판단할 수 있다. 따라서 이를 예방하기 위하여 열선을 깔아서 DHT22에서 측정한 온도를 바탕으로 특정한 온도 이하로 내려가게 된다면 열선이 활성화될 수 있게 할 수 있다.

\subsubsection{PID 알고리즘}

PID는 보통 무엇인가를 제어하는 데 사용하는 일종의 ’제어 알고리즘’이다. PID 각각이 의미를 가지고 있는데, P는 제어, I는 적분, D는 미분 항의 세 가지를 가지고 있으며, INPUT이 존재할 시 이를 목표로 하는 목표점(setpoint)을 잡은 뒤, 이와 비교하여 오차를 계산하게 된다. 이 오차를 이용한 계산은 다시 목표점으로 부터의 오차를 구한 뒤 피드백 값을 이용하여 다시 제어에 활용을 하는 구조로 이루어져 있다.
PID의 각 역할을 다시 설명하자면, P(비례항)는 오차 값의 크기에 비례하는 제어작용, I(적분 항)은 오차를 줄이는 항이고, D(미분 항)는 출력 값의 급격한 변화를 늦추어 부드러운 변화형을 가질 수 있도록 한다.\\
PID 코드란 자신이 원하는 값에 빠르게 접근할 수 있도록 이용하는 코드이다. PID 코드를 이용하면 원하는 길이, 즉 초점이 맞는 길이에 부드럽고 빠르게 접근할 수 있도록 할 수 있으므로 시간 단축에 많은 도움이 될 것이다.

\subsubsection{EEPROM}

EEPROM은 Arduino 내부에 저장된 비휘발성 메모리로, 컴퓨터의 ‘RAM’과 같은 역할을 하고 있다. 비휘발성이기 때문에 Arduino를 초기화하거나 껐다가 다시 켰더라도 정보를 저장하고 있다.\\
Arduino별로 한 EEPROM의 주소에 들어갈 수 있는 수의 크기가 달라진다. ARDUINO NANO는 4KB의 EEPROM을 지원하므로 0~255까지의 수를 한 번에 저장할 수 있다. 이렇게 저장할 수 있는 수가 작으므로, 여러 가지 주소를 활용하여 큰 수 또한 나타낼 수 있다.(수를 진법으로 바꾸는 과정과 유사함)\\
실제로 이를 기반으로 펌웨어를 제작하여 보았지만, 수가 약 32000 이상으로 넘어가는 상황에서는 갑자기 수가 이상하게 커지는 오류가 발견되었고, 이를 고쳐야 할 것이다.

\subsubsection{모터의 연결 상태}

모터의 연결 상태는 펌웨어를 실행하는 데 아주 중요하다. 만약 펌웨어가 실행되는 도중에 모터가 연결되지 않으면, 스위치를 움직였을 때 스위치의 숫자는 움직이지만, 모터는 움직이지 않아 결과적으로 숫자의 오류를 불러일으킨다. 또한, 모터를 펌웨어가 실행되는 도중에 연결선을 뽑으면 펌웨어에 에러가 일어나는데, 이 경우 다시 모터를 꽂더라도 정상적으로 실행이 되지 않는다. 따라서 이런 여러 상황에 대하여 모터의 연결 상태를 대비한 에러 코드를 설정해야 숫자와 모터가 오차를 일으키는 일이 없을 것이다.

